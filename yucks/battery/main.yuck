(deflisten battery_
  :interval "3s"
  "./yucks/battery/script.sh"
) ; defpoll battery JSON


(defwidget battery []
  (box
    :class "battery"
    :orientation "horizontal"
    :spacing 5
    :space-evenly false
    (image
      :class "icon"
      :image-width 40
      :path {battery_?.percentage == 100 ?
      "./yucks/battery/images/full.png" :
      battery_?.status == "charging" ?
      "./yucks/battery/images/charging.png" :
      battery_?.percentage >= 80 ?
      "./yucks/battery/images/high.png" :
      battery_?.percentage >= 50 ?
      "./yucks/battery/images/middle.png" :
      "./yucks/battery/images/low.png"
      }
    )  ; image; battery image
    (label
      :class "label"
      :text "${battery_.percentage}%"
    )  ; label; battery percentage
  )
) ; defwidget battery